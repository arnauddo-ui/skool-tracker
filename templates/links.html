{% extends "base.html" %}
{% block title %}Liens de tracking â€” Skool Tracker{% endblock %}
{% block content %}
<div class="card">
    <h2>â• CrÃ©er un nouveau canal</h2>
    <form method="POST" style="display:flex;gap:0.75rem;align-items:center;margin-top:1rem">
        <input type="text" name="channel_name" placeholder="Nom du canal (ex: podcast, webinar...)" required style="flex:1;background:var(--bg-input);border:1px solid var(--border);color:var(--text-primary);padding:0.6rem 1rem;border-radius:8px">
        <button type="submit" class="btn btn-primary">CrÃ©er</button>
    </form>
    <small class="text-muted" style="display:block;margin-top:0.5rem">Lettres, chiffres et tirets uniquement.</small>
</div>
<div class="card">
    <h2>ğŸ”— Vos liens de tracking ({{ links|length }})</h2>
    <p class="text-muted">Destination : <strong>{{ skool_url }}</strong></p>
    <div class="links-grid">
        {% for link in links %}
        <div class="link-card">
            <span class="channel-badge channel-{{ link.channel }}">{{ link.channel }}</span>
            <code style="flex:1;color:var(--accent);font-size:0.85rem;word-break:break-all" id="url-{{ link.channel }}">{{ link.url }}</code>
            <button class="btn btn-copy" onclick="copyLink('{{ link.channel }}')">ğŸ“‹</button>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
{% block scripts %}
<script>
function copyLink(ch){
    navigator.clipboard.writeText(document.getElementById('url-'+ch).textContent).then(()=>{
        event.target.textContent='âœ…';setTimeout(()=>event.target.textContent='ğŸ“‹',2000);
    });
}
</script>
{% endblock %}
